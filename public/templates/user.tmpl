{{define "title"}}Internal: Users{{end}}
{{define "content"}}
    <style>
        .tab {
            display: inline-block;
            margin-left: 40px;
        }
    </style>
    <div class="column is-10">
        <section class="hero is-info welcome is-small">
            <div class="hero-body">
                <div class="container">
                    <h1 class="title">You are currently viewing {{.User.Nickname}} {{.User.Lastname}}.</h1>
                </div>
            </div>
        </section>
        <br>
        <div class="columns box" style="height: fit-content">
            <div class="column is-2">
                <figure class="avatar">
                    {{if .User.UseGravatar}}<img src="{{.Gravatar}}" alt="placeholder" width="128px" height="128px"/>{{else}}
                    <img src="https://placehold.it/128x128" alt="placeholder"/>{{end}}
                </figure>
                <div class="buttons">
                    <a class="button is-info is-outlined">
                        Reset password
                    </a>
                    <a class="button is-warning is-outlined">
                        Deactivate
                    </a>
                    <a class="button is-danger is-outlined">
                        Delete
                    </a>
                </div>
            </div>
            <div class="column">
                {{with .User}}
                    <p>Current user information...<br>
                        User ID: {{.UserID}}<br>
                        First name: {{.Firstname}}<br>
                        Last name: {{.Lastname}}<br>
                        Nickname: {{.Nickname}}<br>
                        Username: {{.Username}}<br>
                        Enabled: {{if .Enabled}}enabled{{else}}disabled{{end}}<br>
                        Login type: {{.LoginType}}<br>
                        {{if and (.UniversityUsername.Valid) (gt (len .UniversityUsername.String) 0)}}University username: {{.UniversityUsername.String}}<br>{{end}}
                        {{if .LDAPUsername.Valid}}LDAP (Active Directory) username: {{.LDAPUsername.String}}<br>{{end}}
                        Email: {{.Email}}<br>
                        {{if .LastLogin.Valid}}Last login: {{$.LastLogin}}<br>{{end}}
                        {{if gt (lenA .Permissions) 0}}
                        Permissions: <ol>
                            {{ range $perm := .Permissions }}
                                <li style="list-style-type: none;"><span class="tab"></span>{{ $perm }}</li>
                            {{end}}
                        </ol>{{end}}
                        {{if gt (lenA .Roles) 0}}
                        Roles: <ol>
                            {{ range $role := .Roles }}
                                <li style="list-style-type: none;"><span class="tab"></span>{{ $role }}</li>
                            {{end}}
                        </ol>{{end}}
                        Avatar source: {{if .UseGravatar}}Using gravatar{{else}}Using local file{{end}}<br>
                        {{if ne $.CreatedBy.UserID -1}}
                            Created by: <a href="/internal/user/{{$.CreatedBy.UserID}}">{{$.CreatedBy.UserID}}-{{$.CreatedBy.Nickname}} {{$.CreatedBy.Lastname}}</a><br>
                            Created at: {{$.CreatedAt}}
                        {{else}}
                            Created by: UNKNOWN({{.CreatedBy}})<br>
                            Created at: {{$.CreatedAt}}
                        {{end}}<br>
                        {{if ne $.UpdatedBy.UserID -1}}
                            Updated by: <a href="/internal/user/{{$.UpdatedBy.UserID}}">{{$.UpdatedBy.UserID}}-{{$.UpdatedBy.Nickname}} {{$.UpdatedBy.Lastname}}</a><br>
                            Updated at: {{$.UpdatedAt}}<br>
                        {{end}}
                        {{if ne $.DeletedBy.UserID -1}}
                            Deleted by: <a href="/internal/user/{{$.DeletedBy.UserID}}">{{$.DeletedBy.UserID}}-{{$.DeletedBy.Nickname}} {{$.DeletedBy.Lastname}}</a><br>
                            Deleted at: {{$.DeletedAt}}
                        {{end}}<br><br></p>
                        <p class="subtitle">Use the fields below to modify the user.</p>
                {{end}}
                <form>
                    <div class="field">
                        <label class="label" for="nickname">Nickname</label>
                        <div class="control">
                            <input
                                    id="nickname"
                                    class="input"
                                    type="text"
                                    placeholder="Nickname"
                            />
                        </div>
                    </div>
                    <div class="field">
                        <label class="label" for="firstname">First name</label>
                        <div class="control">
                            <input class="input" type="text" placeholder="Nickname"/>
                        </div>
                    </div>
                    <div class="field">
                        <label class="label" for="email">Email</label>
                        <div class="control">
                            <input class="input" type="email" placeholder="Email" id="email"/>
                        </div>
                    </div>
                    <button class="button is-block is-info">Update</button>
                </form>
            </div>
        </div>
        <br>
        <br>
        <br>
    </div>
{{end}}